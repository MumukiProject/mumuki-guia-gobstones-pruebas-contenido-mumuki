<div class="btn-group" role="group" aria-label="Emojis">
  <button type="button" class="btn btn-secondary emoji-button" onclick="writeEmoji('‚¨áÔ∏èÔ∏è')">‚¨áÔ∏èÔ∏è</button>
  <button type="button" class="btn btn-secondary emoji-button" onclick="writeEmoji('‚û°Ô∏è')">‚û°Ô∏è</button>
  <button type="button" class="btn btn-secondary emoji-button" onclick="writeEmoji('‚¨ÖÔ∏è')">‚¨ÖÔ∏è</button>
  <button type="button" class="btn btn-secondary emoji-button" onclick="writeEmoji('‚¨ÜÔ∏è')">‚¨ÜÔ∏è</button>
  <button type="button" class="btn btn-secondary emoji-button" onclick="writeEmoji('üöÖÔ∏è')">üöÖÔ∏è</button>
  <button type="button" class="btn btn-secondary emoji-button" onclick="writeEmoji('üçÆÔ∏è')">üçÆÔ∏è</button>
  <button type="button" class="btn btn-secondary emoji-button" onclick="writeEmoji('üöóÔ∏è')">üöóÔ∏è</button>
  <button type="button" class="btn btn-secondary emoji-button" onclick="writeEmoji('üåºÔ∏è')">üåºÔ∏è</button>
</div>

<div class="panel panel-default" style="width:100%;">
  <div class="panel-body">
    <ol class="mu-inputs">
      <li>
        <input id="uno" name="primer_dibujo" type="text" class="form-control mu-free-form-input" placeholder="Primer dibujo" onclick="setCursor('one')" onchange="onChange('uno')" class="form-control mu-free-form-input" type="text">
      </li>
      <li>
        <input id="dos" name="segundo_dibujo" type="text" class="form-control mu-free-form-input" placeholder="Segundo dibujo" onclick="setCursor('dos')" onchange="onChange('dos')" class="form-control mu-free-form-input" type="text">
      </li>
      <li>
        <input id="tres" name="tercer_dibujo" type="text" class="form-control mu-free-form-input" placeholder="Tercer dibujo" onclick="setCursor('tres')" onchange="onChange('tres')" class="form-control mu-free-form-input" type="text">
      </li>
      <li>
        <input id="cuatro" name="cuarto_dibujo" type="text" class="form-control mu-free-form-input" placeholder="Cuarto dibujo" onclick="setCursor('cuatro')" onchange="onChange('cuatro')" class="form-control mu-free-form-input" type="text">
      </li>
    </ol>
    <style>
      .mu-inputs {
        padding-left: 30px;
        margin: 0;
      }
      .mu-inputs > li {
        padding-left: 5px;
        margin: 5px 15px;
        height: 45px;
      }
      .mu-inputs > li > input {
        border-top: none;
        border-left: none;
        border-right: none;
        border-radius: 0;
        width: 100%;
        height: 30px;
        padding: 0px;
      }
    </style>
  </div>
</div>

<script>
  let start;
  let inputId = 'uno';
/* 
  function writeEmoji(emoji) {
    var doc = mumuki.page.editors[0].getDoc();
    var cursor = doc.getCursor();
    doc.replaceRange(emoji, cursor);
  }
*/

  function writeEmoji(emoji) {
    console.log('#${inputId}');
    const emojisInput = $('#${inputId}');
    const emojiCursorStart = emojisInput.prop('selectionStart');
    const emojiCursorEnd = emojisInput.prop('selectionEnd');
    const value = emojisInput.val() || '';
    const textBefore = value.substring(0,  emojiCursorStart);
    const textAfter  = value.substring(emojiCursorEnd, value.length);
    emojisInput.val(textBefore + emoji + textAfter);
    start = emojiCursorStart + emoji.length;
    $('#${inputId}.mu-free-form-input').change();
  }

  function onChange(inputId) {
    input = $('#${inputId}')
    input[0].setSelectionRange(start, start);
    input.focus();
  }
  
  function setCursor(id) {
    inputId = id;
  }
</script>

<style>
  .emoji-button {
    background-color: #ecf0f1;
    border: 1px solid #dce4ec;
    border-radius: 4px;
  }
  
  .emoji-button:focus {
    outline-color: #0B456D;
  }
</style>
